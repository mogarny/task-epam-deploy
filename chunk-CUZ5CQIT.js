import{Ab as y,Bb as S,Ga as f,Ia as O,Ja as l,Kb as W,La as u,Ma as t,Na as n,Oa as m,Qa as p,Va as i,W as b,Wa as g,Xa as v,a as C,ab as w,b as h,bb as x,ea as _,fa as P,va as a,wa as M}from"./chunk-UDVRZVAG.js";var z=()=>({img:!0});function I(c,s){if(c&1&&(t(0,"tr")(1,"td"),i(2),n(),t(3,"td"),_(),t(4,"svg",8)(5,"g"),m(6,"path",9),n()()(),P(),t(7,"td"),m(8,"div",10),i(9),n(),t(10,"td"),i(11),n(),t(12,"td"),i(13),n()()),c&2){let e=s.$implicit;a(2),g(e.id),a(2),u("img"),l("ngClass",x(8,z)),a(2),O("stroke",e.color),a(3),g(e.name),a(2),g(e.wins),a(2),g(e.time)}}var E=class c{constructor(s){this.service=s;this.page=this.service.getPageWinners()}page=1;limit=5;totalCount=0;winners=[];cars=[];objects=[];fetchWinners(s){this.service.getWinners(this.page,this.limit).subscribe({next:e=>{if(this.winners=e.body,this.totalCount=Number(e.headers.get("x-total-count")),this.winners&&this.winners.length>0){let o=this.winners.map(r=>r.id);this.service.fetchCarsByIds(o).subscribe({next:r=>{this.cars=r.body,console.log(this.cars),this.objects=this.combine(this.winners,this.cars),console.log(this.objects),console.log(this.winners)}})}},error:e=>console.error("Error fetching cars:",e)})}combine(s,e){let o=[];console.log(e);for(let r=0;r<e.length;r++){let d=s.find(k=>k.id===e[r].id);o.push(h(C({},d),{color:e[r].color,name:e[r].name}))}return console.log(o),o.sort((r,d)=>r.time-d.time),o}get lastPage(){return console.log(this.totalCount),this.totalCount===0?1:Math.ceil(this.totalCount/this.limit)}nextPage(){this.page++,this.fetchWinners(this.limit),this.service.setPageWinners(this.page)}previousPage(){this.page--,this.fetchWinners(this.limit),this.service.setPageWinners(this.page)}ngOnInit(){this.fetchWinners(this.limit),typeof window<"u"&&(this.page=this.service.getPageWinners())}ngOnDestroy(){this.service.setPageWinners(this.page)}static \u0275fac=function(e){return new(e||c)(M(W))};static \u0275cmp=b({type:c,selectors:[["app-winner"]],standalone:!0,features:[w],decls:27,vars:4,consts:[[1,"winners-page"],[1,"title"],[1,"table-container"],[1,"winners-table"],[1,"dotted-font"],[4,"ngFor","ngForOf"],[1,"pagination"],[3,"click","disabled"],["version","1.1","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 256 256",0,"xml","space","preserve",3,"ngClass"],["stroke-width","3","fill-opacity","0","d",`M157.5,10h-59c-15.6,0-28.3,17.4-28.3,33v174.6c0,15.6,12.7,28.3,28.3,28.3h59
            c15.6,0,28.3-12.7,28.3-28.3V43C185.8,27.4,173.1,10,157.5,10z M180.9,81.2v58.5l-13.7,1.8v-24.1L180.9,81.2z M173.7,64.1
            c-5.1,19.6-11.1,42.7-11.1,42.7H93.4L82.3,64.1C82.3,64.1,126.9,48.9,173.7,64.1z M89,118.9v22.5l-13.7-1.8v-57L89,118.9z
            M75.3,200.4v-52l13.7,1.7v41.1L75.3,200.4z M83.1,215.2l11.1-16.7h69.1l11.1,16.7H83.1z M167.2,189.7v-39.5l13.7-1.8v50.4
            L167.2,189.7z`],[1,"car-icon"]],template:function(e,o){e&1&&(t(0,"div",0)(1,"h1",1),i(2,"Winners"),n(),t(3,"div",2)(4,"table",3)(5,"thead")(6,"tr")(7,"th"),i(8,"\u2116"),n(),t(9,"th"),i(10,"Car"),n(),t(11,"th"),i(12,"Name"),n(),t(13,"th"),i(14,"Wins"),n(),t(15,"th"),i(16,"Best Time (Seconds)"),n()()(),t(17,"tbody",4),f(18,I,14,9,"tr",5),n()()(),t(19,"div",6),i(20,"Page 1"),n(),t(21,"div")(22,"button",7),p("click",function(){return o.previousPage()}),i(23,"<"),n(),i(24),t(25,"button",7),p("click",function(){return o.nextPage()}),i(26,">"),n()()()),e&2&&(a(18),l("ngForOf",o.objects),a(4),l("disabled",o.page===1),a(2),v(" PAGE #",o.page," "),a(),l("disabled",o.lastPage===o.page))},dependencies:[S,y],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;color:#fff;margin:0;display:flex;justify-content:center;align-items:center}.winners-page[_ngcontent-%COMP%]{width:90%;max-width:800px}.winners-page[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:center;font-size:2.5rem;margin-bottom:20px;color:#e94560}.winners-page[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{padding:20px}.winners-page[_ngcontent-%COMP%]   .winners-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;text-align:left}.winners-page[_ngcontent-%COMP%]   .winners-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px}.winners-page[_ngcontent-%COMP%]   .winners-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;border-bottom:1px solid #4b4b6f}.winners-page[_ngcontent-%COMP%]   .winners-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .car-icon[_ngcontent-%COMP%]{display:inline-block;width:24px;height:12px;border-radius:3px;margin-right:10px}.winners-page[_ngcontent-%COMP%]   .winners-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .car-icon.audi[_ngcontent-%COMP%]{background-color:#ff5722}.winners-page[_ngcontent-%COMP%]   .winners-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .car-icon.mercedes[_ngcontent-%COMP%]{background-color:#9c27b0}.winners-page[_ngcontent-%COMP%]   .winners-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .car-icon.mazda[_ngcontent-%COMP%]{background-color:#4caf50}.winners-page[_ngcontent-%COMP%]   .winners-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .car-icon.volvo[_ngcontent-%COMP%]{background-color:#03a9f4}.winners-page[_ngcontent-%COMP%]   .winners-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .car-icon.tesla[_ngcontent-%COMP%]{background-color:#ffeb3b}"]})};export{E as WinnersComponent};
